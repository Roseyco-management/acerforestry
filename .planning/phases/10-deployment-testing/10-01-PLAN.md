---
phase: 10-deployment-testing
plan: 01
type: execute
---

<objective>
Deploy Acer Forestry website to Vercel production with configured environment variables and optional custom domain setup.

Purpose: Make the site publicly accessible with proper analytics tracking and production configuration.
Output: Live production deployment at Vercel URL (and custom domain if configured).
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior Phase Context
@.planning/phases/09-seo-performance/09-03-SUMMARY.md

**Tech stack available:**
- Next.js 15.1.4 with TypeScript
- Vercel CLI installed and ready
- Production build tested and validated (Phase 09-03)
- All 5 pages confirmed serving correctly

**Established patterns:**
- Static generation for all pages
- Analytics configured: GA4, Microsoft Clarity, Meta Pixel
- All scripts use afterInteractive strategy
- Bundle sizes: 102-155KB per page

**Key files:**
- next.config.ts - Production config with compression, image optimization
- package.json - Build scripts configured
- public/ - All static assets (favicons, logo, robots.txt, og-image)

**From Phase 9:**
- Production build validated - all pages HTTP 200
- Performance optimizations active
- Mobile responsiveness verified
- SEO metadata complete on all pages
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Vercel project and deploy to production</name>
  <files>vercel.json (may be created)</files>
  <action>
    Run `vercel --prod --yes` to deploy to production. This will:
    - Detect Next.js project automatically
    - Build and deploy to production
    - Capture the production URL

    If authentication required, this will trigger an auth gate checkpoint.

    Verify deployment:
    - Run `vercel ls` to confirm deployment exists
    - Check all 5 routes respond with HTTP 200
    - Capture the production URL for verification

    Do NOT create a vercel.json file unless Vercel requires specific configuration - Next.js auto-detection handles everything.
  </action>
  <verify>
    - `vercel ls` shows the deployment
    - All pages accessible: /, /forest-managers, /services, /subcontractors, /training
    - Production URL captured and working
  </verify>
  <done>Site deployed to Vercel production, all pages accessible, deployment URL captured</done>
</task>

<task type="auto">
  <name>Task 2: Configure analytics environment variables in Vercel</name>
  <files>N/A (Vercel environment variables)</files>
  <action>
    Add environment variables for analytics tracking using Vercel CLI:

    ```bash
    # Google Analytics 4
    vercel env add NEXT_PUBLIC_GA_MEASUREMENT_ID production
    # Value: G-XXXXXXXXXX (from user or skip if not ready)

    # Microsoft Clarity
    vercel env add NEXT_PUBLIC_CLARITY_PROJECT_ID production
    # Value: clarity-id (from user or skip if not ready)

    # Meta Pixel
    vercel env add NEXT_PUBLIC_META_PIXEL_ID production
    # Value: pixel-id (from user or skip if not ready)
    ```

    If user doesn't have these IDs yet, skip this step - analytics will simply not track until IDs are added later. The site will function perfectly without them.

    After adding env vars, redeploy: `vercel --prod --yes` to pick up new environment variables.

    Note: Analytics are configured to gracefully handle missing IDs - no errors will occur.
  </action>
  <verify>
    - `vercel env ls` shows added environment variables
    - If env vars added, redeployment completed successfully
    - Site still accessible after redeploy
  </verify>
  <done>Environment variables configured (or skipped if IDs not ready), site redeployed if needed</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Production deployment on Vercel with analytics configuration</what-built>
  <how-to-verify>
    1. Visit the production URL provided above
    2. Test all 5 pages load correctly:
       - Home page (/)
       - Forest Managers page (/forest-managers)
       - Services page (/services)
       - Subcontractors page (/subcontractors)
       - Training page (/training)
    3. Verify:
       - No console errors in browser DevTools
       - All images load (logo, OG image, favicons)
       - Navigation works between pages
       - Animations play smoothly
       - CTAs (phone/email links) are clickable
    4. Optional: Check analytics tracking in browser network tab if IDs were configured
  </how-to-verify>
  <resume-signal>Type "approved" if deployment looks good, or describe any issues</resume-signal>
</task>

<task type="checkpoint:decision" gate="optional">
  <decision>Configure custom domain (acerforestry.co.uk)</decision>
  <context>
    The site is now live on Vercel's default URL (*.vercel.app). You can optionally configure a custom domain now or do this later.

    Custom domain setup requires:
    - Domain purchased and DNS access
    - Adding domain to Vercel project
    - Updating DNS records (A/CNAME)
    - Waiting for DNS propagation (5 mins - 48 hours)
  </context>
  <options>
    <option id="now">
      <name>Configure custom domain now</name>
      <pros>Complete launch with branded URL, professional appearance</pros>
      <cons>Requires DNS configuration, propagation wait time</cons>
    </option>
    <option id="later">
      <name>Configure domain later</name>
      <pros>Launch faster, configure domain when ready, Vercel URL works perfectly</pros>
      <cons>Temporary Vercel subdomain for now</cons>
    </option>
  </options>
  <resume-signal>Select: now or later</resume-signal>
</task>

<task type="auto">
  <name>Task 3: Configure custom domain (if selected)</name>
  <files>N/A (DNS configuration)</files>
  <action>
    If user selected "now":

    1. Add domain to Vercel:
       ```bash
       vercel domains add acerforestry.co.uk
       ```

    2. Vercel will provide DNS configuration instructions. Typical setup:
       - A record: @ → 76.76.21.21 (Vercel's IP)
       - CNAME record: www → cname.vercel-dns.com

    3. User must update DNS records with their domain registrar (this is the manual step)

    4. Verify domain configuration:
       ```bash
       vercel domains ls
       ```

    5. Wait for DNS propagation (typically 5-30 minutes, can be up to 48 hours)

    6. Once propagated, verify domain works:
       ```bash
       curl -I https://acerforestry.co.uk
       ```

    If user selected "later":
    - Skip this task entirely
    - Document Vercel URL as the production URL
    - Custom domain can be added anytime via Vercel dashboard or CLI
  </action>
  <verify>
    If custom domain configured:
    - `vercel domains ls` shows domain with status "verified"
    - `curl -I https://acerforestry.co.uk` returns 200
    - HTTPS certificate auto-provisioned by Vercel

    If skipped:
    - Vercel URL documented as production URL
  </verify>
  <done>Custom domain configured and verified (or skipped for later setup)</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Site deployed to Vercel production
- [ ] All 5 pages accessible and working
- [ ] Analytics environment variables configured (or skipped if not ready)
- [ ] User verified deployment looks correct
- [ ] Custom domain configured (or deferred to later)
</verification>

<success_criteria>

- All tasks completed
- Production deployment accessible and verified
- Environment variables configured (or skipped)
- Custom domain decision made and executed
- No deployment errors or broken pages
- Ready for final testing in Plan 10-02
</success_criteria>

<output>
After completion, create `.planning/phases/10-deployment-testing/10-01-SUMMARY.md`:

# Phase 10 Plan 01: Vercel Deployment Setup Summary

**[Production deployment URL and configuration status]**

## Accomplishments

- Deployed to Vercel production
- Environment variables configured for analytics
- Custom domain status
- All pages verified accessible

## Files Created/Modified

- List any vercel.json or configuration files created
- Note environment variables added

## Decisions Made

- Custom domain configuration decision and outcome

## Issues Encountered

[Any deployment issues and resolutions, or "None"]

## Next Step

Ready for 10-02-PLAN.md - Final cross-browser and device testing, launch verification
</output>
